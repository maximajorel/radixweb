const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object},data:function(){return{searchString:"",results:[],page:1,totalPages:0,perPage:this.block.settings.block.options.postsPerPage.value,postTypes:this.block.settings.block.options.activePostTypes.value,limitToAuthor:this.block.settings.block.options.limitToAuthor.value,loading:!1,strings:{nothingFound:__("Nothing posts found","uipress-lite"),by:__("By","uipress-lite")},searching:!1}},inject:["uipData","uipress","uiTemplate"],mounted:function(){this.getPosts()},watch:{page:{handler(e,t){""!=e&&this.getPosts()},deep:!0},postTypes:{handler(e,t){this.getPosts()},deep:!0},perPage:{handler(e,t){console.log("hello?"),this.getPosts()},deep:!0},"block.settings.block.options.postsPerPage.value":{handler(e,t){this.getPosts()},deep:!0},"block.settings.block.options.limitToAuthor.value":{handler(e,t){this.limitToAuthor=e,this.getPosts()},deep:!0}},computed:{returnPerPage(){return this.block.settings.block.options.postsPerPage.value}},methods:{getPosts(){let e=this;if(e.loading)return;e.loading=!0;let t=this.uipress.get_block_option(this.block,"block","activePostTypes");e.postTypes=t;let i=new FormData;i.append("action","uip_get_recent_posts"),i.append("security",uip_ajax.security),i.append("search",e.searchString),i.append("page",e.page),i.append("postTypes",JSON.stringify(e.postTypes)),i.append("perPage",e.returnPerPage),i.append("limitToAuthor",e.limitToAuthor),e.uipress.callServer(uip_ajax.ajax_url,i).then(t=>{t.error&&(e.uipress.notify(t.message,"uipress-lite","","error",!0),e.searching=!1),t.success&&(e.loading=!1,e.results=t.posts,e.totalPages=t.totalPages)})},goBack(){this.page>1&&(this.page=this.page-1)},goForward(){this.page<this.totalPages&&(this.page=this.page+1)}},template:'\x3c!--builder mode--\x3e            <div :class="block.settings.advanced.options.classes.value" class="uip-flex uip-flex-column" :id="block.uid">              <div class="uip-flex uip-flex-column uip-row-gap-xs uip-padding-xs uip-list-area">                <loading-chart v-if="loading"></loading-chart>                <template  v-if="!loading" v-for="item in results">                  <div class="uip-flex uip-flex-row uip-flex-between uip-flex-center" @mouseover="item.hover = true" @mouseleave="item.hover = false">                    <div class="">                      <div class="uip-flex uip-flex-row uip-gap-xxs uip-flex-center" >                        <div class="uip-text-bold uip-post-title uip-link-default uip-cursor-pointer"  @click="uipress.updatePage(item.link)">{{item.name}}</div>                        <div class="uip-text-xs uip-background-primary-wash uip-border-round uip-padding-xxxs uip-post-type-label">{{item.type}}</div>                        <div class="uip-flex uip-gap-xxs uip-flex-center" v-if="item.hover">                          <div @click="uipress.updatePage(item.editLink)" :href="item.editLink" class="uip-icon uip-cursor-pointer uip-link-muted">edit_document</div>                          <a :href="item.link" target="_BLANK" class="uip-icon uip-cursor-pointer uip-link-muted uip-no-underline">open_in_new</a>                        </div>                      </div>                      <div class="uip-text-s uip-post-meta uip-flex uip-flex-row uip-gap-xxxs">                        <span class="uip-text-muted">{{strings.by}}</span>                        <span class="">{{item.author}}</span>                        <span class="uip-text-muted">{{item.modified}}</span>                      </div>                    </div>                  </div>                </template>                <div v-if="results.length == 0 && searchString.length > 0" class="uip-text-muted uip-text-s">                  {{strings.nothingFound}}                </div>              </div>              <div class="uip-flex uip-gap-xs uip-padding-xs" v-if="totalPages > 1">                <button @click="goBack" class="uip-button-default uip-icon uip-nav-button">chevron_left</button>                <button @click="goForward" v-if="page < totalPages" class="uip-button-default uip-icon uip-nav-button">chevron_right</button>              </div>            </div>'}};