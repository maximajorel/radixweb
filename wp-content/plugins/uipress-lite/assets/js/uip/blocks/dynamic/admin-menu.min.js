const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{props:{display:String,name:String,block:Object},data:function(){return{menu:JSON.parse(JSON.stringify(this.uipData.adminMenu.menu)),activeMenu:!1,activeLink:"",breadCrumbs:[{name:__("Home","uipress-lite"),url:this.uipData.dynamicOptions.viewadmin.value}],menuDirection:this.block.settings.block.options.menuDirection.value.value,strings:{mainmenu:__("Main menu","uipress-lite")}}},inject:["uipData","uipress","uiTemplate"],watch:{breadCrumbs:{handler(i,e){let n=new CustomEvent("uip_breadcrumbs_change",{detail:{crumbs:this.breadCrumbs}});document.dispatchEvent(n)},deep:!0}},mounted:function(){let i=this;document.addEventListener("uip_page_change",e=>{""==e.detail.url?i.activeLink=e.detail.url:i.activeLink=e.detail.url.replaceAll("%2F","/")},{once:!1}),document.addEventListener("uip_page_change_loaded",e=>{i.updateMenuFromFrame(),i.returnMenu},{once:!1})},computed:{subMenuStyle(){return this.block.settings.block.options.subMenuStyle.value.value},getHidden(){let i=this.block.settings.block.options.hiddenMenuItems.value;return this.uipress.isObject(i)?[]:i},returnMenu(){let i=this.activeLink,e=this,n=this.menu;n=this.checkForadvancedMenu(this.menu),e.breadCrumbs=[{name:__("Home","uipress-lite"),url:e.uipData.dynamicOptions.viewadmin.value}];for(const t of n){t.active=!1,""!=i&&t.url==i&&(t.active=!0,e.breadCrumbs.push({name:t.name,url:t.url}));let n=!1;if(t.submenu&&t.submenu.length>0)for(const u of t.submenu)u.active=!1,""!=i&&u.url==i&&(u.active=!0,n=u,e.breadCrumbs.push({name:u.name,url:u.url}));n&&(t.active=!0,e.activeMenu=t,e.breadCrumbs=[{name:__("Home","uipress-lite"),url:e.uipData.dynamicOptions.viewadmin.value}],e.breadCrumbs.push({name:t.name,url:t.url}),e.breadCrumbs.push({name:n.name,url:n.url}))}return n},subMenuCustomIcon(){let i=this.uipress.get_block_option(this.block,"block","subMenuIcon");return!!i.value&&i.value},subMenuCustomIcon(){let i=this.uipress.get_block_option(this.block,"block","subMenuIcon");return!!i.value&&i.value},menuAutoUpdate(){return this.uipress.get_block_option(this.block,"block","disableAutoUpdate")}},methods:{returnCustomMenu(){let i=this.uipress.get_block_option(this.block,"block","advancedoptions");return void 0!==i&&(!!i&&(!!Array.isArray(i)&&(i.length<1?void 0:i)))},checkForadvancedMenu(i){if(!this.returnCustomMenu())return i;let e=JSON.parse(JSON.stringify(this.returnCustomMenu())),n=[],t=this.menuAutoUpdate;for(let i of e)if("uid"in i&&n.push(i.uid),"submenu"in i)for(let e of i.submenu)"uid"in e&&n.push(e.uid);let u={},s=[];JSON.parse(JSON.stringify(i));for(let[a,p]of i.entries()){let i=!1;if("uid"in p){if(i=p.uid,s.push(i),!n.includes(i)){t||e.splice(a,0,p),"notifications"in p&&(u[p.uid]=p.notifications);continue}"notifications"in p&&(u[p.uid]=p.notifications)}if("submenu"in p&&(Array.isArray(p.submenu)&&!(p.submenu.length<1)))for(let[a,l]of p.submenu.entries())if("uid"in l){let a=l.uid;if(s.push(a),"notifications"in l&&(u[a]=l.notifications),t)continue;if(!n.includes(a)){let t=e.filter(e=>e.uid==i);if(void 0!==t&&t.length>0){"submenu"in t[0]||(t[0].submenu=[]),n.push(l.name+a);continue}e.push(l),n.push(l.name+a)}}}for(var a=e.length-1;a>=0;a--){let i=e[a];if("uid"in i&&(i.uid in u&&(i.notifications=u[i.uid]),i.custom||s.includes(i.uid)||e.splice(a,1)),"submenu"in i)for(var p=i.submenu.length-1;p>=0;p--){let e=i.submenu[p];"uid"in e&&(e.uid in u&&(e.notifications=u[e.uid]),e.custom||s.includes(e.uid)||i.submenu.splice(a,1))}}return this.block.settings.block.options.advancedoptions.value=e,e},updateMenuFromFrame(){let i=document.getElementsByClassName("uip-page-content-frame"),e=this;if(i[0]){let n=i[0];if(n.contentWindow.uipMasterMenu&&void 0!=typeof n.contentWindow.uipMasterMenu){let i=n.contentWindow.uipMasterMenu;if(void 0===i)return;if(!("menu"in i))return;e.menu=JSON.parse(JSON.stringify(i.menu))}}},activeItem(i){let e=this;i.submenu&&i.submenu.length>0&&(this.activeMenu=i);let n=new RegExp("^(?:[a-z+]+:)?//","i"),t=i.url;if(n.test(t)||(t=this.uipData.dynamicOptions.viewadmin.value+t),i.withoutFrame){let i=new URL(t);i.searchParams.set("uip-framed-page",1),t=i.href}if(i.withoutUiPress){let n=new URL(t),u=e.uipress.createUID();n.searchParams.set("uipwf",u),n.searchParams.set("uip-framed-page",0),t=n.href;let s=new FormData;return s.append("action","uip_create_frame_switch"),s.append("security",uip_ajax.security),s.append("uid",u),void e.uipress.callServer(uip_ajax.ajax_url,s).then(e=>{i.newTab?(this.$refs.newTab.href=t,this.$refs.newTab.click(),this.$refs.newTab.href="",this.$refs.newTab.blur()):this.uipress.updatePage(t,!0)})}if(i.newTab||i.withoutFrame)return this.$refs.newTab.href=t,this.$refs.newTab.click(),this.$refs.newTab.href="",void this.$refs.newTab.blur();this.uipress.updatePage(i.url)},ifHiden(i){return!this.getHidden.includes(i)},hideIcons(){return this.block.settings.block.options.hideIcons.value},returnDirection(){return"vertical"==this.block.settings.block.options.menuDirection.value.value?"uip-flex-column":"uip-flex-row uip-flex-wrap"},customIcon(i){let e=i.uid,n=this.block.settings.block.options.editMenuItems.value;if(!this.uipress.isObject(n))return"article";if(Object.hasOwn(n,e)){let i=n[e].icon;if(i&&""!=i)return i}return void 0===i.icon?"article":(i.icon.includes("uipblank")&&(i.icon=i.icon.replace("uipblank","article")),i.icon)},customTitle(i){let e=i.uid,n=this.block.settings.block.options.editMenuItems.value;if(!this.uipress.isObject(n))return!1;if(Object.hasOwn(n,e)){let i=n[e].title;if(void 0!==i)return i}return i.name},returnDropPos(){return"horizontal"==this.block.settings.block.options.menuDirection.value.value?"bottom-left":"right"},isMenuHorizontal(){return"horizontal"==this.block.settings.block.options.menuDirection.value.value},returnClasses(){let i="";return i+=this.uipress.get_block_option(this.block,"advanced","classes")}},template:'\n    \n          <div class="uip-admin-menu uip-text-normal" :id="block.uid" :class="returnClasses()">\n    \n    \n            \x3c!--INLINE DROP MENU--\x3e\n            <template v-if="subMenuStyle == \'inline\' && !isMenuHorizontal()">\n              <div class="uip-flex" :class="returnDirection()">\n            \n                <template v-for="item in returnMenu">\n                \n                  <template v-if="!item.hidden">\n                \n                    <div v-if="item.type != \'sep\' && ifHiden(item.uid)" class="uip-flex uip-flex-column uip-row-gap-xs">\n                      <div @click="activeItem(item)" class="uip-flex uip-gap-xxs uip-flex-center uip-cursor-pointer uip-top-level-item uip-margin-bottom-xs" :class="{\'uip-top-level-item-active\' : item.active}">\n                        <div v-if="!hideIcons()" v-html="customIcon(item)" class="uip-flex uip-flex-center uip-menu-icon uip-icon uip-icon-medium"></div>\n                        <div class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center">\n                          <div>{{customTitle(item)}}</div>\n                          <div v-if="item.notifications && item.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-text-bold uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{item.notifications}}</span></div>\n                        </div>\n                        <template v-if="!subMenuCustomIcon">\n                          <div v-if="item.submenu && !item.active" class="uip-icon uip-margin-left-auto">chevron_right</div>\n                          <div v-if="item.submenu && item.active" class="uip-icon uip-margin-left-auto">expand_more</div>\n                        </template>\n                        <div v-else-if="item.submenu" class="uip-icon uip-margin-left-auto uip-submenu-icon" >{{subMenuCustomIcon}}</div>\n                      </div>\n                      <div v-if="item.submenu && item.active" class="uip-admin-submenu uip-margin-left-s uip-margin-bottom-s">\n                        <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n                          <template v-for="sub in activeMenu.submenu">\n                          \n                            <template v-if="!sub.hidden">\n                            \n                              <div v-if="sub.type != \'sep\'" class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center">\n                                <div @click="activeItem(sub)" :class="{\'uip-sub-level-item-active\' : sub.active}" class="uip-cursor-pointer uip-sub-level-item">{{sub.name}}</div>\n                                <div v-if="sub.notifications && sub.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{sub.notifications}}</span></div>\n                              </div>\n                              \n                              <div v-else-if="!sub.name" class="uip-margin-bottom-s uip-menu-separator"></div>\n                              \n                              <div v-else class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                                <span v-if="sub.icon" class="uip-icon">{{sub.icon}}</span>\n                                <span>{{sub.name}}</span>\n                              </div>\n                              \n                            </template>\n                            \n                          </template>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div v-else-if="!item.name && ifHiden(item.uid)" class="uip-margin-bottom-s uip-menu-separator"></div>\n                    \n                    <div v-else-if="ifHiden(item.uid)" class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                      <span v-if="item.icon" class="uip-icon">{{item.icon}}</span>\n                      <span>{{item.name}}</span>\n                    </div>\n                  \n                  </template>\n                  \n                </template>\n              \n              </div>\n            </template>\n            \x3c!--END INLINE DROP MENU--\x3e\n            \n            \n            \n            \n            \x3c!--HOVER DROP MENU--\x3e\n            <template v-if="subMenuStyle == \'hover\' || isMenuHorizontal()">\n              <div class="uip-flex" :class="returnDirection()">\n                <template v-for="item in returnMenu">\n                \n                \n                  <template v-if="!item.hidden">\n                  \n                    <template v-if="item.type != \'sep\'  && ifHiden(item.uid)">\n                  \n                      <drop-down :hover="true" triggerClass="uip-flex uip-flex-grow" :dropPos="returnDropPos()">\n                        <template v-slot:trigger>\n                          <div @click="activeItem(item)" class="uip-flex uip-gap-xxs uip-flex-center uip-cursor-pointer uip-top-level-item uip-margin-bottom-xs"\n                          :class="{\'uip-top-level-item-active\' : item.active}">\n                            <div v-if="!hideIcons()" v-html="customIcon(item)" class="uip-flex uip-flex-center uip-menu-icon uip-icon uip-icon-medium"></div>\n                            <div class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center uip-line-height-1">\n                              <div class="">{{customTitle(item)}}</div>\n                              <div v-if="item.notifications && item.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-text-bold uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{item.notifications}}</span></div>\n                            </div>\n                          </div>\n                        </template>\n                        <template v-slot:content v-if="item.submenu">\n                          <div class="uip-admin-submenu uip-padding-xs">\n                            <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n                              <div @click="activeItem(item)" class="uip-flex uip-gap-xxs uip-flex-center uip-top-level-item uip-margin-bottom-xs" \n                              :class="{\'uip-top-level-item-active\' : item.active}">\n                                <div v-if="!hideIcons()" v-html="item.icon" class="uip-flex uip-flex-center uip-menu-icon"></div>\n                                <div class="uip-flex-grow" v-html="item.name"></div>\n                              </div>\n                              <template v-for="sub in item.submenu">\n                              \n                                <template v-if="!sub.hidden">\n                                \n                                  <div v-if="sub.type != \'sep\'" class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center">\n                                    <div @click="activeItem(sub)" :class="{\'uip-sub-level-item-active\' : sub.active}" class="uip-cursor-pointer uip-sub-level-item">\n                                      {{sub.name}}\n                                    </div>\n                                    <div v-if="sub.notifications && sub.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{sub.notifications}}</span></div>\n                                  </div>\n                                  \n                                  <div v-else-if="!sub.name" class="uip-margin-bottom-s uip-menu-separator"></div>\n                                  \n                                  <div v-else class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                                    <span v-if="sub.icon" class="uip-icon">{{sub.icon}}</span>\n                                    <span>{{sub.name}}</span>\n                                  </div>\n                                \n                                </template>\n                                \n                              </template>\n                            </div>\n                          </div>\n                        </template>\n                      </drop-down>\n                    \n                    </template>\n                    \n                    \n                    <div v-else-if="!item.name && ifHiden(item.uid)" class="uip-margin-bottom-s uip-menu-separator"></div>\n                    \n                    <div v-else-if="ifHiden(item.uid)" class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                      <span v-if="item.icon" class="uip-icon">{{item.icon}}</span>\n                      <span>{{item.name}}</span>\n                    </div>\n                    \n                  </template>  \n                  \n                  \n                </template>\n              </div>\n            </template>\n            \x3c!--END HOVER DROP MENU--\x3e\n            \n            \n            \n            \x3c!--DYNAMIC MENU--\x3e\n            <template v-if="subMenuStyle == \'dynamic\' && !isMenuHorizontal()">\n              <div class="uip-flex uip-gap-x" :class="returnDirection()">\n                <template v-if="activeMenu == false" v-for="item in returnMenu">\n                \n                  <template v-if="!item.hidden">\n                  \n                    <template v-if="item.type != \'sep\' && ifHiden(item.uid)">\n                      <div @click="activeItem(item)" class="uip-flex uip-gap-xxs uip-flex-center uip-cursor-pointer uip-top-level-item uip-margin-bottom-xs"\n                      :class="[{\'uip-top-level-item-active\' : item.active}, item.customClasses]" >\n                        <div v-if="!hideIcons()" v-html="customIcon(item)" class="uip-flex uip-flex-center uip-menu-icon uip-icon uip-icon-medium"></div>\n                        <div class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center uip-line-height-1">\n                          <div>{{customTitle(item)}}</div>\n                          <div v-if="item.notifications && item.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-text-bold uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{item.notifications}}</span></div>\n                        </div>\n                        <template v-if="!subMenuCustomIcon">\n                          <div v-if="item.submenu" class="uip-icon uip-margin-left-auto">chevron_right</div>\n                        </template>\n                        <div v-else-if="item.submenu" class="uip-icon uip-margin-left-auto uip-submenu-icon" >{{subMenuCustomIcon}}</div>\n                      </div>\n                    </template>\n                    \n                    <div v-else-if="!item.name  && ifHiden(item.uid)" class="uip-margin-bottom-s uip-menu-separator"></div>\n                    \n                    <div v-else-if="ifHiden(item.uid)" class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                      <span v-if="item.icon" class="uip-icon">{{item.icon}}</span>\n                      <span>{{item.name}}</span>\n                    </div>\n                  \n                  </template>\n                  \n                  \n                </template>\n                \n                \n                \n                <template v-else>\n                \n                  <div class="uip-flex uip-flex-column uip-row-gap-m uip-slide-in-right">\n                    <div class="uip-flex uip-gap-xxs uip-flex-row uip-flex-center uip-cursor-pointer" @click="activeMenu = false">\n                      <div class="uip-icon uip-icon-medium">chevron_left</div>\n                      <div class="uip-flex-grow">{{strings.mainmenu}}</div>\n                    </div>\n                    <div class="uip-flex uip-gap-xxs uip-flex-row uip-flex-center uip-text-bold uip-text-l uip-sub-menu-header">\n                      <div class="uip-flex-grow" v-html="activeMenu.name"></div>\n                    </div>\n                    <div v-if="activeMenu.submenu" class="uip-admin-submenu">\n                      <div class="uip-flex uip-flex-column uip-row-gap-xxs">\n                        <template v-for="sub in activeMenu.submenu">\n                          \n                          <template v-if="!sub.hidden">\n                          \n                            <div v-if="sub.type != \'sep\'" class="uip-flex-grow uip-flex uip-gap-xs uip-flex-center" :class="sub.customClasses">\n                              <div @click="activeItem(sub)" :class="{\'uip-sub-level-item-active\' : sub.active}" class="uip-cursor-pointer uip-sub-level-item">{{sub.name}}</div>\n                              <div v-if="sub.notifications && sub.notifications > 0" class="uip-border-circle uip-w-14 uip-h-14 uip-ratio-1-1 uip-background-secondary uip-text-inverse uip-text-xxs uip-flex uip-flex-center uip-flex-middle uip-menu-notification"><span>{{sub.notifications}}</span></div>\n                            </div>\n                            \n                            <div v-else-if="!sub.name" class="uip-margin-bottom-s uip-menu-separator"></div>\n                            \n                            <div v-else class="uip-margin-bottom-s uip-margin-top-s uip-flex uip-flex-row uip-gap-xxs uip-menu-separator">\n                              <span v-if="sub.icon" class="uip-icon">{{sub.icon}}</span>\n                              <span>{{sub.name}}</span>\n                            </div>\n                          \n                          </template>\n                          \n                        </template>\n                      </div>\n                    </div>\n                  </div>\n                </template>\n              </div>\n            </template>\n            \x3c!--END DYNAMIC MENU--\x3e\n            <a ref="newTab" target="_BLANK" class="uip-hidden"></a>\n            \n            \n            \n          </div>'}};