export function moduleData(){return{props:{hover:Boolean,dropPos:String,externalOpen:Boolean,triggerClass:String,onOpen:Function,shortCut:[Boolean,String,Array]},data:function(){return{modelOpen:!1,dropWidth:0,position:this.dropPos}},watch:{externalOpen:{handler(t,e){t&&this.openThisComponent()},deep:!0}},mounted:function(){this.mountShortcut()},destroyed(){document.removeEventListener("scroll",this.handleScroll,!0)},unmounted(){document.removeEventListener("scroll",this.handleScroll,!0)},methods:{mountShortcut(){if(!this.shortCut)return;let t=JSON.parse(JSON.stringify(this.shortCut)),e=[];window.addEventListener("keydown",i=>{let o=!1;e.push(i.key.toString()),o=!0;for(let i of t)if(!e.includes(i)){o=!1;break}o&&this.openThisComponent()}),window.addEventListener("keyup",t=>{e=[]})},handleScroll(t){this.setPosition()},onClickOutside(t){if(!this.$refs.uipdrop)return;const e=t.composedPath?t.composedPath():void 0;!e||e.includes(this.$refs.uipdrop)||this.$refs.uipdrop.contains(t.target)||this.closeThisComponent()},openThisComponent(){this.modelOpen=!this.modelOpen,1==this.modelOpen&&document.addEventListener("scroll",this.handleScroll,!0),requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!0),this.onOpen&&this.onOpen(),this.setPosition()})},closeThisComponent(){this.modelOpen=!1,document.documentElement.removeEventListener("click",this.onClickOutside,!0),document.removeEventListener("scroll",this.handleScroll,!0)},setPosition(){self=this;if(!self.$el)return;let t=0,e=0,i=0,o=0,n=document.getElementById("uip-ui-preview-area");n&&n.contains(self.$refs.uipdrop)&&(t=n.getBoundingClientRect().top,e=n.getBoundingClientRect().left,o=window.innerWidth-n.getBoundingClientRect().right,i=window.innerHeight-n.getBoundingClientRect().bottom);let s=self.$refs.uipdrop,r=self.$refs.droptrigger,l="auto",p="auto",d="auto",h="auto";this.position||(this.position="bottom-left"),s.getBoundingClientRect().bottom>window.innerHeight&&(this.position=this.position.replace("bottom","top")),s.getBoundingClientRect().right>window.innerWidth&&("right"==this.position&&(this.position="left"),"bottom-left"!=this.position&&"top-left"!=this.position||(this.position=this.position.replace("left","right"))),s.getBoundingClientRect().left<10&&("top-right"==this.position&&this.position,"left"==this.position&&(this.position=this.position.replace("left","right"))),this.position&&"bottom-left"!=this.position||(l=r.getBoundingClientRect().bottom+10-t+"px",d=r.getBoundingClientRect().left-e+"px"),"top-left"==this.position&&(p=window.innerHeight-r.getBoundingClientRect().top+10-i+"px",d=r.getBoundingClientRect().left-e+"px"),"bottom-right"==this.position&&(l=r.getBoundingClientRect().bottom+10-t+"px",h=window.innerWidth-r.getBoundingClientRect().right-e+"px"),"top-right"==this.position&&(p=window.innerHeight-r.getBoundingClientRect().top+10-i+"px",h=window.innerWidth-r.getBoundingClientRect().right-o+"px"),"right"==this.position&&(l=r.getBoundingClientRect().top-t+"px",d=r.getBoundingClientRect().right+10-e+"px"),"left"==this.position&&(l=r.getBoundingClientRect().top-t+"px",h=window.innerWidth-r.getBoundingClientRect().left+10-o+"px"),s.style.bottom=p,s.style.left=d,s.style.right=h,s.style.top=l},openOnHover(){this.hover&&(this.modelOpen=!0,requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!0),this.onOpen&&this.onOpen(),this.hover&&this.setPosition()}))},closeOnHover(){this.hover&&(this.modelOpen=!1)}},template:'<div class="uip-position-relative" @mouseover="openOnHover()" @mouseleave="closeOnHover()">\t  \t  <div class="uip-flex">\t\t  \t\t<div class="uip-cursor-pointer" :class="triggerClass" ref="droptrigger" @click="openThisComponent()"><slot name="trigger"></slot></div>\t\t\t    <slot name="post-trigger"></slot>\t\t    </div>\t\t    <div v-if="modelOpen"  ref="uipdrop" class="uip-position-fixed uip-z-index-9999 uip-modal-open">          <div class="" style="position: absolute; background: rgba(0,0,0,0); inset: -20px; z-index:0"></div>          <div class="uip-shadow uip-position-relative uip-dropdown-conatiner uip-background-default uip-border-round uip-border uip-margin-xl uip-z-index-1">\t\t        <slot name="content"></slot>\t\t      </div>        </div>\t    </div>'}};