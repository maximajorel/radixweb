const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{inject:["uipData","router","uipress","uiTemplate","unsavedChanges"],data:function(){return{history:{states:[],index:0},ui:{strings:{undo:__("Undo","uipress-lite"),redo:__("Redo","uipress-lite"),historyStates:__("History states","uipress-lite")}}}},watch:{"history.index":{handler(t,i){this.changehistoryState(t)},deep:!0}},mounted:function(){let t=this,i=JSON.parse(JSON.stringify(t.uiTemplate.content));t.logHistoryState(__("Project opened","uipress-lite"),i,i),document.addEventListener("uip_builder_history_change",i=>{t.unsavedChanges=!0,t.logHistoryState(i.detail.type,i.detail.oldTemplate,i.detail.newTemplate)},{once:!1})},computed:{returnHistoryStates(){return this.history.states}},methods:{changehistoryState(t){let i=this.history.states[t].template;this.uiTemplate.content=i},logHistoryState(t,i,e){let s=this.history.states;var o=new Date;let r=o.getHours()+":"+String(o.getMinutes()).padStart(2,"0");0==e&&(e=JSON.parse(JSON.stringify(this.uiTemplate.content)));let u={name:t,time:r,template:e};s.splice(0,0,u),s.length>10&&s.pop(),this.history.index=0,this.history.states=s},historyBackward(){this.history.index<this.history.states.length-1&&(this.history.index+=1)},historyForward(){this.history.index>0&&(this.history.index=this.history.index-1)}},template:'\x3c!-- History --\x3e\t\t<uip-tooltip :message="ui.strings.undo" :delay="500">  \t\t\t<div @click="historyBackward()" class="hover:uip-background-muted uip-padding-xxxs uip-border-round uip-flex uip-flex-center  uip-icon uip-link-default uip-text-xl uip-ratio-1-1 uip-line-height-1 uip-icon-medium" :class="{\'uip-text-muted\' : history.index == history.states.length - 1 || history.states.length == 0}">\t\t\t\tundo  \t\t\t</div>\t\t</uip-tooltip>\t\t<uip-tooltip :message="ui.strings.redo" :delay="500">  \t\t\t<div @click="historyForward()" class="hover:uip-background-muted uip-padding-xxxs uip-border-round uip-flex uip-flex-center  uip-icon uip-link-default uip-text-xl uip-ratio-1-1 uip-line-height-1 uip-icon-medium"   \t\t\t:class="{\'uip-text-muted\' : history.index < 1 || history.states.length == 0}">\t\t\t\tredo  \t\t\t</div>\t\t</uip-tooltip>\t\t<uip-tooltip :message="ui.strings.historyStates" :delay="500">  \t\t\t<drop-down dropPos="bottom-left">\t\t\t\t<template v-slot:trigger>\t  \t\t\t\t<div class="hover:uip-background-muted uip-padding-xxxs uip-border-round uip-flex uip-flex-center  uip-icon uip-link-default uip-text-xl uip-ratio-1-1 uip-line-height-1 uip-icon-medium">\t\t\t\t\t\thistory\t  \t\t\t\t</div>\t\t\t\t</template>\t\t\t\t<template v-slot:content>\t  \t\t\t\t<div class="uip-flex uip-flex-column uip-row-gap-xs uip-padding-xs uip-min-w-200" dropPos="bottom-left">\t\t\t\t\t\t<div class="uip-text-bold">{{ui.strings.historyStates}}</div>\t\t\t\t\t\t<template v-for="(state, index) in returnHistoryStates">\t\t  \t\t\t\t\t<div @click="history.index = index" class="uip-background-muted uip-border-round uip-padding-xxs uip-flex uip-flex-column uip-cursor-pointer hover:uip-background-grey" :class="{\'uip-background-primary-wash\' :index == history.index}">\t\t\t\t\t\t\t\t<div>{{state.name}}</div>\t\t\t\t\t\t\t\t<div class="uip-text-muted uip-text-xs">{{state.time}}</div>\t\t  \t\t\t\t\t</div>\t\t\t\t\t\t</template>\t  \t\t\t\t</div>\t\t\t\t</template>  \t\t\t</drop-down>\t\t</uip-tooltip>\t  \t\x3c!--End of history --\x3e'}};