const{__:__,_x:_x,_n:_n,_nx:_nx}=wp.i18n;export function moduleData(){return{data:function(){return{loading:!0,templateID:this.$route.params.templateID,mode:"light",templateAppliestoCurrentUser:!1,menu:this.uipData.adminMenu.menu,ui:{sideBar:{activeTab:"settings"},strings:{themeStyles:__("Theme styles","uipress"),revertStyle:__("Revert style back to default","uipress-lite"),appliesTo:__("Applies to","uipress-lite"),excludes:__("Excludes","uipress-lite"),templateType:__("Template type","uipress-lite"),uiTemplate:__("UI template","uipress-lite"),adminPage:__("Admin Page","uipress-lite"),loginPage:__("Login page (coming soon)","uipress-lite"),appliesToSelfTitle:__("Template will now load for you!","uipress-lite"),appliesToSelf:__("Take care not to revoke access to anything you may need in the admin.","uipress-lite"),appliesToSelfMeta:__("If you haven't already, we recommend setting up:","uipress-lite"),safeMode:__("safe mode","uipress-lite"),theme:__("Theme","uipress"),add:__("Add","uipress"),variableLabel:__("Variable label","uipress"),variableName:__("Variable name","uipress"),deleteVariable:__("Delete variable","uipress"),advanced:__("Advanced","uipress"),customCSS:__("Custom CSS","uipress-lite"),customJS:__("Custom JS","uipress-lite"),light:__("Light","uipress-lite"),dark:__("Dark","uipress-lite"),templateName:__("Template name","uipress-lite"),active:__("Active","uipress-lite"),selectUsersAndRoles:__("Select users and roles","uipress-lite"),searchUsersAndRoles:__("Search users and roles","uipress-lite"),custom:__("custom","uipress-lite"),menuIcon:__("Menu icon","uipress-lite"),addToSubmenu:__("Add to submenu","uipress-lite"),noneTopLevel:__("None (top level)","uipress-lite"),applyToSubsites:__("Apply to subsites","uipress-lite"),watchOut:__("Is this an admin page?","uipress-lite"),watchOutDescription:__("This template does not contain a content block. The content block is key to navigating the admin. Setting this live as a uiTemplate can cause a lock out.","uipress-lite")}},switchOptions:{light:{value:"light",label:__("Light","uipress-lite")},dark:{value:"dark",label:__("Dark","uipress-lite")}},newVariable:{label:"",var:""}}},inject:["uipData","router","uipress","uiTemplate"],mounted:function(){this.loading=!1},watch:{"uiTemplate.globalSettings.rolesAndUsers":{handler(e,t){this.checkTemplateApplies()},deep:!0},"uiTemplate.globalSettings.excludesRolesAndUsers":{handler(e,t){this.checkTemplateApplies()},deep:!0}},computed:{returnFormatedMenu(){self=this;let e=[];for(const t of self.menu){let i={};i.name=t.uid,"sep"!=t.type&&(i.label=t.name.replace(/<[^>]*>?/gm,""),i.url=t.url,e.push(i))}return e},isTemplateWithoutFrame(){if("ui-template"==this.uiTemplate.globalSettings.type&&this.uiTemplate.content.length>0){if(!JSON.stringify(this.uiTemplate.content).includes("uip-content"))return!0}return!1}},methods:{returnTemplateOption(e,t){let i=t.uniqueKey,s=this.uiTemplate.globalSettings.options;return e in s||(s[e]={}),i in s[e]||(t.accepts===String&&(s[e][i]=""),t.accepts===Array&&(s[e][i]=[]),t.accepts===Object&&(s[e][i]={})),s[e][i]},saveTemplateOption(e,t,i){this.uiTemplate.globalSettings.options[e][t]=i},isTemplateForUs(){return"ui-template"==this.uiTemplate.globalSettings.type&&this.templateAppliestoCurrentUser},checkTemplateApplies(){let e=new FormData,t=this,i=this.uiTemplate.globalSettings.rolesAndUsers,s=this.uiTemplate.globalSettings.excludesRolesAndUsers;i.length<1?t.templateAppliestoCurrentUser=!1:(i=JSON.stringify(i),s=JSON.stringify(s),e.append("action","uip_check_template_applies"),e.append("security",uip_ajax.security),e.append("usersFor",i),e.append("usersExcluded",s),t.uipress.callServer(uip_ajax.ajax_url,e).then(e=>{e.error&&(t.uipress.notify(e.message,"uipress-lite","","error",!0),t.saving=!1),e.success&&(1==e.areWeIn?t.templateAppliestoCurrentUser=!0:t.templateAppliestoCurrentUser=!1)}))},fetchReturnData(e,t){e},openSettings(e){let t=this.$route.params.templateID;this.router.push("/uibuilder/"+t+"/settings/"+e)}},template:'\n      <div>\n        <div class="uip-flex uip-flex-column uip-row-gap-m uip-margin-bottom-m">\n          <div class="">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.templateName}}\n            </div>\n            <input class="uip-input uip-w-100p" type="text" v-model="uiTemplate.globalSettings.name" :placeholder="ui.strings.templateName">\n          </div>\n          <div class="">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.templateType}}\n            </div>\n            <select class="uip-input" v-model="uiTemplate.globalSettings.type">\n              <option value="ui-template">{{ui.strings.uiTemplate}}</option>\n              <option value="ui-admin-page">{{ui.strings.adminPage}}</option>\n              <option value="ui-login-page" disabled>{{ui.strings.loginPage}}</option>\n            </select>\n          </div>\n          \n          \x3c!-- Admin page specific options--\x3e\n          <div class="uip-scale-in-top " v-if="uiTemplate.globalSettings.type == \'ui-admin-page\'">\n            <div class="uip-flex uip-flex-column uip-row-gap-m">\n              <div>\n                <div class="uip-text-bold uip-margin-bottom-xs">\n                  {{ui.strings.menuIcon}}\n                </div>\n                <icon-select :value="uiTemplate.globalSettings.menuIcon" :returnData="function(e){uiTemplate.globalSettings.menuIcon = e}"></icon-select>\n              </div>\n              <div>\n                <div class="uip-text-bold uip-margin-bottom-xs">\n                  {{ui.strings.addToSubmenu}}\n                </div>\n                <select class="uip-input" v-model="uiTemplate.globalSettings.menuParent">\n                    <option value="">{{ui.strings.noneTopLevel}}</option>\n                    <template v-for="item in returnFormatedMenu">\n                      <option :value="item.url">{{item.label}}</option>\n                    </template>\n                </select>\n              </div>\n            </div>\n          </div>\n          \x3c!-- End admin page specific options--\x3e\n          \n          <div class="">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.active}}\n            </div>\n            <label class="uip-switch">\n              <input type="checkbox" v-model="uiTemplate.globalSettings.status">\n              <span class="uip-slider"></span>\n            </label>\n          </div>\n          <div v-if="uipData.options.multisite && uipData.options.networkActivated && uipData.options.primarySite">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.applyToSubsites}}\n            </div>\n            <label class="uip-switch">\n              <input type="checkbox" v-model="uiTemplate.globalSettings.applyToSubsites">\n              <span class="uip-slider"></span>\n            </label>\n          </div>\n          <div v-if="isTemplateWithoutFrame" class=" uip-background-red-wash uip-border-round uip-text-s uip-padding-xs uip-scale-in-top uip-flex uip-flex-column uip-row-gap-xs">\n            <div class="uip-text-bold uip-text-l uip-text-emphasis">{{ui.strings.watchOut}}</div>\n            <div>{{ui.strings.watchOutDescription}}</div>\n          </div>\n          <div v-if="isTemplateForUs()" class=" uip-background-orange-wash uip-border-round uip-text-s uip-padding-xs uip-scale-in-top uip-flex uip-flex-column uip-row-gap-xs">\n            <div class="uip-text-bold uip-text-l uip-text-emphasis">{{ui.strings.appliesToSelfTitle}}</div>\n            <div>{{ui.strings.appliesToSelf}}</div>\n            <div class="uip-text-muted uip-text-s">\n            <span>{{ui.strings.appliesToSelfMeta}}</span>\n            <a href="https://uipress.notion.site/Filters-Hooks-f20b64d7365641c09c61ed0252b90727?p=c6df814584e64af6aaee3f333dfc29d4&pm=s" target="_BLANK" class="uip-link-default">{{ui.strings.safeMode}}</a>\n            </div>\n          </div>\n          <div class="">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.appliesTo}}\n            </div>\n            <user-role-select :selected="uiTemplate.globalSettings.rolesAndUsers" \n            :placeHolder="ui.strings.selectUsersAndRoles" \n            :searchPlaceHolder="ui.strings.searchUsersAndRoles" :single="false" \n            :updateSelected="function(data){fetchReturnData(data, uiTemplate.globalSettings.rolesAndUsers)}"></user-role-select>\n          </div>\n          <div class="">\n            <div class="uip-text-bold uip-margin-bottom-xs">\n              {{ui.strings.excludes}}\n            </div>\n            <user-role-select :selected="uiTemplate.globalSettings.excludesRolesAndUsers" \n             :placeHolder="ui.strings.selectUsersAndRoles" \n             :searchPlaceHolder="ui.strings.searchUsersAndRoles" :single="false" \n            :updateSelected="function(data){fetchReturnData(data, uiTemplate.globalSettings.excludesRolesAndUsers)}"></user-role-select>\n          </div>\n        </div>\n        <div class="uip-flex uip-flex-column uip-row-gap-xs">\n          <accordion :openOnTick="false">\n            <template v-slot:title>\n              <div class="uip-flex-grow uip-flex uip-gap-xxs uip-flex-center uip-text-bold">\n                <div class="uip-icon">palette</div>\n                <div class="">{{ui.strings.themeStyles}}</div>\n              </div>\n            </template>\n            <template v-slot:content>\n              <div class="uip-padding-xs">\n                <list-variables></list-variables>\n              </div>\n            </template>\n          </accordion>\n          \n          \n          \x3c!-- Dynamic settings --\x3e\n          <template v-for="group in uipData.templateGroupOptions">\n            <accordion :openOnTick="false">\n              <template v-slot:title>\n                <div class="uip-flex-grow uip-flex uip-gap-xxs uip-flex-center uip-text-bold">\n                  <div class="uip-icon">{{group.icon}}</div>\n                  <div class="">{{group.label}}</div>\n                </div>\n              </template>\n              <template v-slot:content>\n                <div class="uip-padding-xs uip-flex uip-flex-column uip-row-gap-m">\n                  \x3c!--Loop through group settings --\x3e\n                  <div v-for="option in group.settings">\n                    <div class="uip-text-bold uip-margin-bottom-xs">{{option.label}}</div>\n                    <div v-if="option.help" class="uip-text-s uip-text-muted uip-margin-bottom-xs">{{option.help}}</div>\n                    <component :is="option.component" :value="returnTemplateOption(group.name, option)" :args="option.args"\n                    :returnData="function(data){saveTemplateOption(group.name, option.uniqueKey, data)}"></component>\n                  </div>\n                  \x3c!--End loop through group settings --\x3e\n                </div>\n              </template>\n            </accordion>\n          </template>\n          \x3c!-- End dynamic settings --\x3e\n          \n          \n        </div>\n      </div>'}};