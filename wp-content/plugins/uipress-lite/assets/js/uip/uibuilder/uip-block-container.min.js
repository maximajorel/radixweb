export function moduleData(){return{props:{display:String,block:Object,itemIndex:Number,currentContent:Array},data:function(){return{hover:!1,delay:200,windowWidth:window.innerWidth,blockStyles:this.updateBlockStyle(),tips:[]}},inject:["uipData","uiTemplate","router","uipress"],watch:{returnSettings:{handler(t,e){JSON.stringify(t)!=JSON.stringify(e)&&(this.blockStyles=this.updateBlockStyle())},deep:!0},"uipData.templateDarkMode":{handler(t,e){this.blockStyles=this.updateBlockStyle()}}},mounted:function(){let t=this;document.addEventListener("uip_builder_preview_change",function(e){t.blockStyles=t.updateBlockStyle()})},computed:{returnSettings(){return JSON.parse(JSON.stringify(this.block.settings))}},methods:{getBlockStyles(){return this.blockStyles},updateBlockStyle(){return this.uipress.render_block_styles(this.block.settings,this.block.uid,this.uipData.templateDarkMode,this.windowWidth)},openSettings(){let t=this.$route.params.templateID;this.router.push("/uibuilder/"+t+"/settings/blocks/"+this.block.uid)},removeBlock(){this.block.uid;this.currentContent.splice(this.itemIndex,1)},duplicateBlock(){let t=Object.assign({},this.currentContent[this.itemIndex]);t.uid=this.uipress.createUID(),t.options=[],t.settings=JSON.parse(JSON.stringify(t.settings)),this.currentContent.splice(this.itemIndex+1,0,t)},pushActiveHover(t,e){let i=this;i.showTooltip(),i.hover=!0;let o=i.uiTemplate.activePath.findIndex(t=>t.id===e),s=i.currentContent.findIndex(t=>t.uid===e);o<0&&i.uiTemplate.activePath.push({id:e,item:t,container:this.currentContent,index:s});let n=document.getElementById("uip-inline-block-options"),l=i.$refs.container,d=l.getBoundingClientRect().top,c=l.getBoundingClientRect().right;n.style.top=d+"px",n.style.left=c+"px"},removeActiveHover(){let t=this.uiTemplate.activePath.findIndex(t=>t.id===this.block.uid),e=this;e.hover=!1,e.removeTooltip(),setTimeout(function(){e.uiTemplate.activePathLock?e.removeActiveHover():e.hover||e.uiTemplate.activePath.splice(t,1)},200)},ifHasCss(){return!!(this.block.settings.advanced&&this.block.settings.advanced.options.css&&this.block.settings.advanced.options.css.value)},ifHasJS(){return!!(this.block.settings.advanced&&this.block.settings.advanced.options.js&&this.block.settings.advanced.options.js.value)},removeTooltip(){for(const t of this.tips)t.remove();this.tips=[]},showTooltip(){let t=this;if(!("tooltip"in this.block))return;if(!("message"in this.block.tooltip))return;if(""==this.block.tooltip.message)return;let e=this.block.tooltip.message,i=document.createElement("div");i.classList.add("uip-tooltip"),i.classList.add("uip-fade-in"),i.classList.add("uip-hidden"),i.setAttribute("id","tooltip-"+t.block.uid),i.innerHTML=e;let o=document.body.appendChild(i),s=document.getElementById(t.block.uid);t.tips.push(o);let n=s.getBoundingClientRect().bottom,l=s.getBoundingClientRect().width/2,d=n+10,c=s.getBoundingClientRect().left;i.style.top=d+"px",i.style.left=c+l+"px",i.style.transform="translateX(-50%)",t.delay=200,this.block.tooltip.delay&&Number.isInteger(parseInt(this.block.tooltip.delay))&&(t.delay=this.block.tooltip.delay),setTimeout(function(){if(!t.hover){let e=document.getElementById("tooltip-"+t.block.uid);return void(e&&e.remove())}document.getElementById("tooltip-"+t.block.uid).classList.remove("uip-hidden"),setTimeout(function(){t.removeTooltip()},3e3)},t.delay)},responsiveHidden(t){if(void 0===t)return!0;if(!t)return!0;let e=window.innerWidth;return"windowWidth"in this.uiTemplate&&(e=this.uiTemplate.windowWidth),!(1==t.mobile&&e<699)&&(!(1==t.tablet&&e<990&&e>=699)&&!(1==t.desktop&&e>990))}},template:'<div ref="container" v-if="responsiveHidden(block.responsive)" class="uip-position-relative uip-inline-flex" :class="{\'uip-border-dashed\' : uiTemplate.display == \'builder\'}"      @mouseenter="pushActiveHover(block, block.uid)" @mouseleave="removeActiveHover()" :id="\'container-\' + block.uid" >        <component is="style">          {{blockStyles}}        </component>        <component is="style" v-if="ifHasCss()">{{block.settings.advanced.options.css.value}}</component>        <component is="script" scoped v-if="ifHasJS()">          {{block.settings.advanced.options.js.value}}        </component>\t  \t\t<slot></slot>\t\t  </div>'}};